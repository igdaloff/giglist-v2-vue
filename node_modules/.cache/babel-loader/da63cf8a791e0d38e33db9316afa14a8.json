{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport cityData from \"../data/songkickCityData.js\";\nexport default {\n  data() {\n    return {\n      selected: 7644,\n      cities: cityData,\n      songkickData: []\n    };\n  },\n\n  methods: {\n    getSongkickUrl(songkickCityId) {\n      const now = new Date();\n      const today = now.toISOString().slice(0, 10);\n      const songkickAPIKey = 'RpuYqxFiPPsJPs5l';\n      let songkickUrl = `https://api.songkick.com/api/3.0/metro_areas/${songkickCityId}/calendar.json?min_date=${today}&apikey=${songkickAPIKey}`;\n      return songkickUrl;\n    },\n\n    getCityData(e) {\n      const songkickCityId = e.target.value;\n      let songkickUrl = this.getSongkickUrl(songkickCityId);\n      fetch(songkickUrl).then(res => res.json()) // Store returned data in empty songkickData array defined above\n      .then(data => this.songkickData = data).catch(err => console.log(err.message));\n    },\n\n    beforeMount() {\n      // Private method that returns a promise (as denoted by 'async')\n      getSpotifyToken = async () => {\n        // From this tutorial: https://www.youtube.com/watch?v=SbelQW2JaDQ\n        const result = await fetch('https://accounts.spotify.com/api/token', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'Authorization': 'Basic ' + btoa('471048b4fff14c79b12b08abb6dae22e: d8b25c87a3e248beb461a94b48f5905f')\n          },\n          body: 'grant_type=client_credentials'\n        });\n        const data = await result.json();\n        return data.access_token;\n      };\n    }\n\n  }\n};","map":{"version":3,"mappings":";AASA,OAAOA,QAAP,MAAqB,6BAArB;AAEA,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IADL;MAELC,MAAM,EAAEH,QAFH;MAGLI,YAAY,EAAE;IAHT,CAAP;EAKD,CAPY;;EAQbC,OAAO,EAAE;IACPC,cAAc,CAACC,cAAD,EAAiB;MAC7B,MAAMC,GAAE,GAAI,IAAIC,IAAJ,EAAZ;MACA,MAAMC,KAAI,GAAIF,GAAG,CAACG,WAAJ,GAAkBC,KAAlB,CAAwB,CAAxB,EAA2B,EAA3B,CAAd;MACA,MAAMC,cAAa,GAAI,kBAAvB;MACA,IAAIC,WAAU,GAAK,gDAA+CP,cAAe,2BAA0BG,KAAM,WAAUG,cAAe,EAA1I;MACA,OAAOC,WAAP;IACD,CAPM;;IAQPC,WAAW,CAACC,CAAD,EAAI;MACb,MAAMT,cAAa,GAAIS,CAAC,CAACC,MAAF,CAASC,KAAhC;MACA,IAAIJ,WAAU,GAAI,KAAKR,cAAL,CAAoBC,cAApB,CAAlB;MAEAY,KAAK,CAACL,WAAD,CAAL,CACGM,IADH,CACQC,GAAE,IAAKA,GAAG,CAACC,IAAJ,EADf,EAGE;MAHF,CAIGF,IAJH,CAIQnB,IAAG,IAAK,KAAKG,YAAL,GAAoBH,IAJpC,EAKGsB,KALH,CAKSC,GAAE,IAAKC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB,CALhB;IAMD,CAlBM;;IAmBTC,WAAW,GAAE;MACX;MACAC,eAAc,GAAI,YAAY;QAC5B;QACA,MAAMC,MAAK,GAAI,MAAMX,KAAK,CAAC,wCAAD,EAA2C;UACnEY,MAAM,EAAE,MAD2D;UAEnEC,OAAO,EAAE;YACP,gBAAgB,mCADT;YAEP,iBAAiB,WAAWC,IAAI,CAAC,oEAAD;UAFzB,CAF0D;UAMnEC,IAAI,EAAE;QAN6D,CAA3C,CAA1B;QASA,MAAMjC,IAAG,GAAI,MAAM6B,MAAM,CAACR,IAAP,EAAnB;QACA,OAAOrB,IAAI,CAACkC,YAAZ;MAEF,CAdA;IAeF;;EApCS;AARI,CAAf","names":["cityData","data","selected","cities","songkickData","methods","getSongkickUrl","songkickCityId","now","Date","today","toISOString","slice","songkickAPIKey","songkickUrl","getCityData","e","target","value","fetch","then","res","json","catch","err","console","log","message","beforeMount","getSpotifyToken","result","method","headers","btoa","body","access_token"],"sourceRoot":"","sources":["/Users/nathan/Sites/giglist-v2-vue/src/components/CitySelect.vue"],"sourcesContent":["<template>\n  <select v-model=\"selected\" @change=\"getCityData\">\n    <option v-for=\"city in cities\" :key=\"city.id\" :value=\"city.id\">{{ city.label }}</option>\n  </select>\n  <p>{{ songkickData }}</p>\n</template>\n\n<script>\n\nimport cityData from \"../data/songkickCityData.js\"\n\nexport default {\n  data() {\n    return {\n      selected: 7644,\n      cities: cityData,\n      songkickData: []\n    }\n  },\n  methods: {\n    getSongkickUrl(songkickCityId) {\n      const now = new Date()\n      const today = now.toISOString().slice(0, 10)\n      const songkickAPIKey = 'RpuYqxFiPPsJPs5l'\n      let songkickUrl = `https://api.songkick.com/api/3.0/metro_areas/${songkickCityId}/calendar.json?min_date=${today}&apikey=${songkickAPIKey}`;\n      return songkickUrl;\n    },\n    getCityData(e) {\n      const songkickCityId = e.target.value\n      let songkickUrl = this.getSongkickUrl(songkickCityId)\n\n      fetch(songkickUrl)\n        .then(res => res.json())\n        \n        // Store returned data in empty songkickData array defined above\n        .then(data => this.songkickData = data)\n        .catch(err => console.log(err.message))      \n    },\n  beforeMount(){\n    // Private method that returns a promise (as denoted by 'async')\n    getSpotifyToken = async () => {\n      // From this tutorial: https://www.youtube.com/watch?v=SbelQW2JaDQ\n      const result = await fetch('https://accounts.spotify.com/api/token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Authorization': 'Basic ' + btoa('471048b4fff14c79b12b08abb6dae22e: d8b25c87a3e248beb461a94b48f5905f')\n        },\n        body: 'grant_type=client_credentials'\n      });\n\n      const data = await result.json();\n      return data.access_token;\n\n    }\n  }\n\n  }\n}\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module"}